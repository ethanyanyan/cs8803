# Additional Features & Implementation Details

## 1. Architecture

- **SwiftUI** for the UI, using a multi-tab structure:

  - **FeedView**: displays shared photos from the user and their accepted friends.
  - **PostView**: allows photo uploads with captions.
  - **ProfileView**: user info management, avatar upload, and sign out.
    - Profile Avatar can be uploaded using the Apple Photos app.

- **Firebase**:
  - **Auth** for user sign in/out.
  - **Firestore** for storing user profiles, posts, and friends data.
  - **Cloudinary** for image uploads (photos and avatars) due to free-tier limitations in Firebase Storage.

## 2. Profile Management

- Each user has a document (or node) named by their `uid` as generated by Firebase when creating a User account.
- Data includes `displayName`, `avatarURL`, `location`, etc.
- Users can edit their display name and upload a profile avatar via **ProfileView**.

- Avatar Upload:
  - The user selects a photo from their device.
  - The photo is uploaded to Cloudinary, and the secure URL is saved in Firestore.

## 3. Feed

- Displays posts from the user and their accepted friends.
- Each post includes:
  - **Poster Name**: Fetched from Firestore based on `userId`.
  - **Image**: Fetched from Cloudinary via a secure URL.
  - **Caption**: Provided by the user during upload.
  - **Timestamp**: When the post was created.
- Posts are ordered by timestamp (most recent first).
- The `FeedView` dynamically fetches user display names for posts using `userId`.

## 4. Post Creation

- Users can upload a photo and write a caption.
- The photo is uploaded to Cloudinary, and the metadata (caption, timestamp, image URL, and userId) is stored in Firestore.
- The new post appears in the feed for the user and their friends.

## 5. Friend System

- Users can:
  - Send, accept, and reject friend requests.
  - View a list of accepted friends.
- Only accepted friends and the user themselves can view posts in the feed.
- Friend statuses (`pending`, `accepted`, `rejected`) are managed in a `friends` subcollection under each user document.

## 6. Learnings Thus Far

- **Steep Learning Curve**: Developing in Swift and iOS was new, but resources like @iOSAcademy helped.
- **Build Failure**: Initial issues with User Sandboxing required troubleshooting via StackOverflow.
- **Third-party Tools**: Firebase Storage limitations led to using Cloudinary for image uploads.
- **Firebase Rules**: Implemented Firestore security rules to ensure:
  - Posts are only visible to their owners and accepted friends.
  - Users can only update their own profile or posts.
  - Friends can only be added or modified by the involved users.
- **Indexing**: Configured Firestore composite indexes to support queries involving multiple fields, such as filtering posts by `userId` and ordering them by `timestamp`.

## 7. Future Enhancements

- **Social Logins**: Integrate Google / Facebook sign-ins.
- **Image Caching**: Use libraries like SDWebImageSwiftUI for efficient image loading.
- **Notifications**: Add push notifications for likes, comments, and friend requests.
- **Commenting System**: Allow users to comment on posts.
- **Access Control**: Further refine Firestore rules for enhanced data security.
